#!/bin/sh
# gtd.sh
#
# A flat file and directory GTD system.
# 
# This contains commands for every step of the GTD workflow.

# Important files to know about!
GTD_DIRECTORY=~/org
INBOX_FILE=inbox/notes.txt

## Capture: collecting anything that I think about.

# quicknote: Add a line to the main Inbox file.
function quicknote {
    line=$1
    echo $line >> $GTD_DIRECTORY/$INBOX_FILE
    printf "Noted '%s' in %s/%s.\n" $line $GTD_DIRECTORY $INBOX_FILE
}

# collect_file: Move a file to the inbox.
function collect_file {
    mv $1 $GTD_DIRECTORY/inbox
    # TODO: dialog to add info of file to inbox
}

## Clarify: Edit what I know   

# inbox: Edit the main inbox file. 
function inbox {
    $EDITOR $GTD_DIRECTORY/$INBOX_FILE 
}

function process_dialog {
    # TODO: implement
}

## Organize.

function archive {
    local project=$1
}

## Reflect.

function show_projects {
    cat ~/org/proj/$1.txt | less
}

# focus on one project.
function focus {
}

## Engage.

# Print help file
function printhelp {
    printf "commands:
    ov: Overview; look at all the projects.
    in: Inbox; Show the inbox file. (Default: notes.txt)
    foc: Focus; Focus on one project.
    note: Add note; Add item to inbox file. \n"
}

# Command launcher.
arg=$2
if [ $1 ]; then
    if [ $1 = 'edit' -a $arg ]; then; edit $arg; fi
    if [ $1 = 'inbox' ]; then; inbox; fi
    if [ $1 = 'overview' ]; then; show *; fi
    if [ $1 = 'project' -a $arg ]; then; show $arg; fi
    if [ $1 = 'quicknote' -a $arg ]; then; quicknote $arg; fi
    if [ $1 = 'help' ]; then; printhelp; fi
fi


