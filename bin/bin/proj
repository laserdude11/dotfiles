#!/bin/sh

cmd=$1
ORG_DIR="$HOME/org"
project="$ORG_DIR/projects/$2"

case $cmd in
    new|mk)
        mkdir "$project"
        touch "$project/notes.txt"
        touch "$project/todo.txt"
        ;;

    enable)
        ln -s "$project" "$ORG_DIR/current"
        ;;

    e|edit|notes)
        $EDITOR "$project/notes.txt"
        ;;

    t|todo|tasks)
        $EDITOR "$project/notes.txt"
        ;;

    disable|close|rm)
        rm -f "$ORG_DIR/current/$2"
        ;;

    archive|ar)
        tar -czf "$ORG_DIR/archive/$2_$(date +"%Y_%m_%d").tar.gz" "$project"
        rm -r "$project"
        ;;

    move|mv)
        mv "$project" "$ORG_DIR/projects/$3"
        ;;

    list|ls|*)
        echo "Current projects:"
        ls "$ORG_DIR/current"
        echo "All projects:"
        tree -d "$ORG_DIR/projects"
        ;;
esac
