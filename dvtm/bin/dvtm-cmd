#!/bin/sh

# Create a dvtm session.
export DVTM_SESSION_DIR="$(mktemp -u "$TMPDIR/dvtm/sessionXXXXXXXX")"
export DVTM_CTL_FIFO="$DVTM_SESSION_DIR/control"
export DVTM_STATUS_FIFO="$DVTM_SESSION_DIR/status"
mkdir -p "$DVTM_SESSION_DIR"
mkfifo "$DVTM_CTL_FIFO"
mkfifo "$DVTM_STATUS_FIFO"
dvtm -c "$DVTM_CTL_FIFO" -s "$DVTM_STATUS_FIFO" "$@" 
rm "$DVTM_CTL_FIFO"
rm "$DVTM_STATUS_FIFO"
rmdir "$DVTM_SESSION_DIR"
